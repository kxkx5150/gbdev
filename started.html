<!DOCTYPE html>
<!-- saved from url=(0060)https://eldred.fr/gb-asm-tutorial/part2/getting-started.html -->
<html lang="en" class="js sidebar-visible light"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!-- Book generated using mdBook -->
        
        <title>Getting started - GB ASM Tutorial</title>


        <!-- Custom HTML head -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site:id" content="@issotm">
        <meta property="og:title" content="Getting started - GB ASM Tutorial">
        <meta property="og:image" content="https://eldred.fr/gb-asm-tutorial/assets/banner/1200x628.png">
        <meta property="og:site_name" content="GB ASM Tutorial">

        
        <meta name="description" content="A complete guide to programming Game Boy games in assembly.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="rgba(0, 0, 0, 0)">

        <link rel="icon" href="https://eldred.fr/gb-asm-tutorial/favicon.svg">
        <link rel="shortcut icon" href="https://eldred.fr/gb-asm-tutorial/favicon.png">
        <link rel="stylesheet" href="./started_files/variables.css">
        <link rel="stylesheet" href="./started_files/general.css">
        <link rel="stylesheet" href="./started_files/chrome.css">
        <link rel="stylesheet" href="./started_files/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="./started_files/font-awesome.css">
        <link rel="stylesheet" href="./started_files/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="./started_files/highlight.css">
        <link rel="stylesheet" href="./started_files/tomorrow-night.css" disabled="">
        <link rel="stylesheet" href="./started_files/ayu-highlight.css" disabled="">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./started_files/custom.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents" aria-hidden="false">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="https://eldred.fr/gb-asm-tutorial/index.html" tabindex="0" data-dl-uid="0" data-dl-original="true" data-dl-translated="true">ホーム</a></li><li class="chapter-item affix "><a href="https://eldred.fr/gb-asm-tutorial/roadmap.html" tabindex="0" data-dl-uid="1" data-dl-original="true" data-dl-translated="true">ロードマップ</a></li><li class="chapter-item affix "><a href="https://eldred.fr/gb-asm-tutorial/help-feedback.html" tabindex="0" data-dl-uid="2" data-dl-original="true" data-dl-translated="true">ヘルプとフィードバック</a></li><li class="chapter-item affix "></li><li class="part-title" data-dl-uid="3" data-dl-original="true" data-dl-translated="true">Part.I - Hello World!</li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/setup.html" tabindex="0" data-dl-uid="4" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="5" data-dl-original="true" data-dl-translated="true">1.</strong>セットアップ</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/hello_world.html" tabindex="0" data-dl-uid="6" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="7" data-dl-original="true" data-dl-translated="true">2.</strong>Hello World!</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/toolchain.html" tabindex="0" data-dl-uid="8" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="9" data-dl-original="true" data-dl-translated="true">3.</strong>ツールチェイン</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/bin_and_hex.html" tabindex="0" data-dl-uid="10" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="11" data-dl-original="true" data-dl-translated="true">4.</strong>2進数、16進数</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/registers.html" tabindex="0" data-dl-uid="12" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="13" data-dl-original="true" data-dl-translated="true">5.</strong>レジスター</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html" tabindex="0" data-dl-uid="14" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="15" data-dl-original="true" data-dl-translated="true">6.</strong>組立の基本</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/memory.html" tabindex="0" data-dl-uid="16" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="17" data-dl-original="true" data-dl-translated="true">7.</strong>メモリ</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/header.html" tabindex="0" data-dl-uid="18" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="19" data-dl-original="true" data-dl-translated="true">8.</strong>ヘッダー</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/operations.html" tabindex="0" data-dl-uid="20" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="21" data-dl-original="true" data-dl-translated="true">9.</strong>オペレーション＆フラッグ</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/jumps.html" tabindex="0" data-dl-uid="22" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="23" data-dl-original="true" data-dl-translated="true">10.</strong>ジャンプ</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/tracing.html" tabindex="0" data-dl-uid="24" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="25" data-dl-original="true" data-dl-translated="true">11.</strong>トレース</a></li><li class="chapter-item "><div data-dl-uid="26" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="27" data-dl-original="true" data-dl-translated="true">12.</strong>グラフィックス</div><a class="toggle" tabindex="0"><div data-dl-uid="28" data-dl-original="true" data-dl-translated="true">❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/tiles.html" tabindex="0"><strong aria-hidden="true">12.1.</strong> Tiles</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/palettes.html" tabindex="0"><strong aria-hidden="true">12.2.</strong> Palettes</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/tilemap.html" tabindex="0"><strong aria-hidden="true">12.3.</strong> Tilemap</a></li></ol></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/wrapup.html" tabindex="0" data-dl-uid="29" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="30" data-dl-original="true" data-dl-translated="true">13.</strong>まとめ</a></li><li class="chapter-item affix "></li><li class="part-title" data-dl-uid="31" data-dl-original="true" data-dl-translated="true">Part II - 初めてのゲーム</li><li class="chapter-item expanded "><a href="https://eldred.fr/gb-asm-tutorial/part2/getting-started.html" class="active" tabindex="0" data-dl-uid="32" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="33" data-dl-original="true" data-dl-translated="true">14.</strong>はじめに</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part2/objects.html" tabindex="0" data-dl-uid="34" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="35" data-dl-original="true" data-dl-translated="true">15.</strong>対象物</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part2/functions.html" tabindex="0" data-dl-uid="36" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="37" data-dl-original="true" data-dl-translated="true">16.</strong>機能一覧</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part2/input.html" tabindex="0" data-dl-uid="38" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="39" data-dl-original="true" data-dl-translated="true">17.</strong>入力</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part2/wip.html" tabindex="0" data-dl-uid="40" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="41" data-dl-original="true" data-dl-translated="true">18.</strong>進行中の仕事</a></li><li class="chapter-item affix "></li><li class="part-title" data-dl-uid="42" data-dl-original="true" data-dl-translated="true">第Ⅲ部 第2試合</li><li class="chapter-item "><div data-dl-uid="43" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="44" data-dl-original="true" data-dl-translated="true">19.</strong>To be written...</div></li><li class="spacer"></li><li class="chapter-item affix "><a href="https://eldred.fr/gb-asm-tutorial/next.html" tabindex="0" data-dl-uid="45" data-dl-original="true" data-dl-translated="true">次に進むべき道</a></li><li class="chapter-item affix "><a href="https://eldred.fr/gb-asm-tutorial/resources.html" tabindex="0" data-dl-uid="46" data-dl-original="true" data-dl-translated="true">リソース</a></li><li class="chapter-item affix "><a href="https://eldred.fr/gb-asm-tutorial/thanks.html" tabindex="0" data-dl-uid="47" data-dl-original="true" data-dl-translated="true">感謝</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar bordered" style="top: 0px;">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar" aria-expanded="true">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title" data-dl-uid="48" data-dl-original="true" data-dl-translated="true">GB ASMチュートリアル</h1>

                    <div class="right-buttons">
                        <a href="https://eldred.fr/gb-asm-tutorial/print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ISSOtm/gb-asm-tutorial" title="Git repository" aria-label="Git repository" target="_blank">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/ISSOtm/gb-asm-tutorial/edit/master/src/part2/getting-started.md" title="Suggest an edit" aria-label="Suggest an edit" target="_blank">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="getting-started" data-dl-uid="49" data-dl-original="true" data-dl-translated="true"><a class="header" href="https://eldred.fr/gb-asm-tutorial/part2/getting-started.html#getting-started" data-dl-uid="50" data-dl-original="true" data-dl-translated="true">はじめに</a></h1>
<p data-dl-uid="51" data-dl-original="true" data-dl-translated="true">このレッスンでは、ゼロから新しいプロジェクトを始めます。<a href="https://en.wikipedia.org/wiki/Breakout_%28video_game%29" target="_blank" data-dl-uid="52" data-dl-original="true" data-dl-translated="true">Breakout</a>/<a href="https://en.wikipedia.org/wiki/Arkanoid" target="_blank" data-dl-uid="53" data-dl-original="true" data-dl-translated="true">Arkanoid</a>クローンを作り、「Unbricked」と名付けます！（ただし、<em data-dl-uid="54" data-dl-original="true" data-dl-translated="true">あなたの</em>プロジェクトなので、他の名前を付けるのは自由です）。</p>
<p data-dl-uid="55" data-dl-original="true" data-dl-translated="true">ターミナルを開いて新しいディレクトリを作り<code class="hljs" data-dl-uid="56" data-dl-original="true" data-dl-translated="true">（mkdir unbricked</code>）、<a href="https://eldred.fr/gb-asm-tutorial/part1/hello_world.html" data-dl-uid="58" data-dl-original="true" data-dl-translated="true">"Hello, world!"</a>のときと同じように、その中に入って<code class="hljs" data-dl-uid="57" data-dl-original="true" data-dl-translated="true">（cd unbricked</code>）ください。</p>
<p data-dl-uid="59" data-dl-original="true" data-dl-translated="true">まず、<code class="hljs" data-dl-uid="60" data-dl-original="true" data-dl-translated="true">main.asmという</code>ファイルを作成し、<code class="hljs" data-dl-uid="61" data-dl-original="true" data-dl-translated="true">hardware.incを</code>コードに含めます。</p>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="language-rgbasm linenos start=1 hljs" style="counter-reset: lineno 0;" data-dl-uid="62" data-dl-original="true" data-dl-translated="true"><span class="line" data-dl-uid="63" data-dl-original="true" data-dl-translated="true"><span class="hljs-keyword" data-dl-uid="64" data-dl-original="true" data-dl-translated="true">INCLUDE</span> <span class="hljs-string" data-dl-uid="65" data-dl-original="true" data-dl-translated="true">"hardware.inc"</span></span></code></pre>
<p data-dl-uid="66" data-dl-original="true" data-dl-translated="true"><code class="hljs" data-dl-uid="67" data-dl-original="true" data-dl-translated="true">hardware.incは</code>何のためにあるのかと思われるかもしれません。 まあ、私たちが書いたコードはCPUにしか影響しませんが、他のコンソールには何もしません（とにかく、直接には）。 他のコンポーネント（例えばグラフィックシステムなど）とやりとりするには、MMIO（<a href="https://en.wikipedia.org/wiki/Memory-mapped_I/O" target="_blank" data-dl-uid="68" data-dl-original="true" data-dl-translated="true">メモリマップド<abbr title="Input/Output" data-dl-uid="69" data-dl-original="true" data-dl-translated="true">I/O</abbr></a>）を使います。基本的に、特定の範囲（アドレス$FF00-FF7F）の<a href="https://eldred.fr/gb-asm-tutorial/part1/memory.html" data-dl-uid="70" data-dl-original="true" data-dl-translated="true">メモリは</a>アクセスされると特殊な処理をします。</p>
<p data-dl-uid="71" data-dl-original="true" data-dl-translated="true">例えば、「PPUステータス」レジスタは$FF41というアドレスにあります。 このアドレスから読み出すと、グラフィックシステムに関する様々な情報を報告し、書き込むといくつかのパラメータを変更することができます。
しかし、すべての数値<a href="https://gbdev.io/pandocs/Power_Up_Sequence.html#hardware-registers" target="_blank" data-dl-uid="74" data-dl-original="true" data-dl-translated="true">（網羅的ではありません</a>）を覚えておくのは非常に面倒です。そこで、<code class="hljs" data-dl-uid="75" data-dl-original="true" data-dl-translated="true">hardware.incが</code>活躍します！<code class="hljs" data-dl-uid="76" data-dl-original="true" data-dl-translated="true">hardware.incは</code>、これらのレジスタごとに1つの定数（たとえば、前述の「PPUステータス」レジスタには<code class="hljs" data-dl-uid="77" data-dl-original="true" data-dl-translated="true">rSTAT</code>）と、これらのレジスタから読み書きされる値に対するいくつかの追加の定数を定義しています。</p>
<div class="box tip">
<p data-dl-uid="78" data-dl-original="true" data-dl-translated="true"><code class="hljs" data-dl-uid="79" data-dl-original="true" data-dl-translated="true">rLCDCと</code> <code class="hljs" data-dl-uid="80" data-dl-original="true" data-dl-translated="true">LCDCF_ONを</code>使った例を以下に示しますのでご安心ください。</p>
<p data-dl-uid="81" data-dl-original="true" data-dl-translated="true">ちなみに、<code class="hljs" data-dl-uid="82" data-dl-original="true" data-dl-translated="true">rは</code>「レジスタ」、<code class="hljs" data-dl-uid="84" data-dl-original="true" data-dl-translated="true">LCDCFの</code> <code class="hljs" data-dl-uid="83" data-dl-original="true" data-dl-translated="true">Fは</code>「フラグ」の略です。</p>
</div>
<p data-dl-uid="85" data-dl-original="true" data-dl-translated="true">次に、ヘッダーのスペースを確保します。 ヘッダーには、ゲームボーイが頼りにしている情報が格納されていますので、不用意に空けないようにしましょう<a href="https://eldred.fr/gb-asm-tutorial/part1/header.html" data-dl-uid="86" data-dl-original="true" data-dl-translated="true">。</a></p>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="language-rgbasm linenos start=3 hljs" style="counter-reset: lineno 2;" data-dl-uid="87" data-dl-original="true" data-dl-translated="true"><span class="line" data-dl-uid="88" data-dl-original="true" data-dl-translated="true"><span class="hljs-keyword" data-dl-uid="89" data-dl-original="true" data-dl-translated="true">SECTION</span> <span class="hljs-string" data-dl-uid="90" data-dl-original="true" data-dl-translated="true">"Header"</span><span class="hljs-punctuation" data-dl-uid="91" data-dl-original="true" data-dl-translated="true">,</span> <span class="hljs-type" data-dl-uid="92" data-dl-original="true" data-dl-translated="true">ROM0</span><span class="hljs-punctuation" data-dl-uid="93" data-dl-original="true" data-dl-translated="true">[</span><span class="hljs-number" data-dl-uid="94" data-dl-original="true" data-dl-translated="true">$100</span><span class="hljs-punctuation" data-dl-uid="95" data-dl-original="true" data-dl-translated="true">]</span></span><span class="line" data-dl-uid="96" data-dl-original="true" data-dl-translated="true">
</span><span class="line" data-dl-uid="97" data-dl-original="true" data-dl-translated="true"> <span class="hljs-keyword" data-dl-uid="98" data-dl-original="true" data-dl-translated="true">jp</span>EntryPoint</span><span class="line" data-dl-uid="99" data-dl-original="true" data-dl-translated="true">
</span><span class="line" data-dl-uid="100" data-dl-original="true" data-dl-translated="true"> <span class="hljs-keyword" data-dl-uid="101" data-dl-original="true" data-dl-translated="true">ds</span> <span class="hljs-number" data-dl-uid="102" data-dl-original="true" data-dl-translated="true">$150</span> <span class="hljs-operator" data-dl-uid="103" data-dl-original="true" data-dl-translated="true">-</span>@<span class="hljs-punctuation" data-dl-uid="104" data-dl-original="true" data-dl-translated="true">,</span> <span class="hljs-number" data-dl-uid="105" data-dl-original="true" data-dl-translated="true">0</span> <span class="hljs-comment" data-dl-uid="106" data-dl-original="true" data-dl-translated="true">; ヘッダのためのスペースを確保</span></span>する。</code></pre>
<p data-dl-uid="107" data-dl-original="true" data-dl-translated="true">ヘッダは<code class="hljs" data-dl-uid="108" data-dl-original="true" data-dl-translated="true">EntryPointに</code>飛ぶので、今度はそれを書きましょう。</p>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="language-rgbasm linenos start=9 hljs" style="counter-reset: lineno 8;" data-dl-uid="109" data-dl-original="true" data-dl-translated="true"><span class="line" data-dl-uid="110" data-dl-original="true" data-dl-translated="true"><span class="hljs-symbol" data-dl-uid="111" data-dl-original="true" data-dl-translated="true">EntryPoint</span><span class="hljs-punctuation" data-dl-uid="112" data-dl-original="true" data-dl-translated="true">:</span></span><span class="line" data-dl-uid="113" data-dl-original="true" data-dl-translated="true"> <span class="hljs-comment" data-dl-uid="114" data-dl-original="true" data-dl-translated="true">; VBlank以外でLCDをOFF</span></span>にしない<span class="line" data-dl-uid="115" data-dl-original="true" data-dl-translated="true"><span class="hljs-symbol" data-dl-uid="116" data-dl-original="true" data-dl-translated="true">WaitVBlank</span><span class="hljs-punctuation" data-dl-uid="117" data-dl-original="true" data-dl-translated="true">:</span></span><span class="line" data-dl-uid="118" data-dl-original="true" data-dl-translated="true"> <span class="hljs-keyword" data-dl-uid="119" data-dl-original="true" data-dl-translated="true">ld</span> <span class="hljs-variable" data-dl-uid="120" data-dl-original="true" data-dl-translated="true">a</span><span class="hljs-punctuation" data-dl-uid="121" data-dl-original="true" data-dl-translated="true">,</span> <span class="hljs-punctuation" data-dl-uid="122" data-dl-original="true" data-dl-translated="true">[rLY</span><span class="hljs-punctuation" data-dl-uid="123" data-dl-original="true" data-dl-translated="true">]</span></span><span class="line" data-dl-uid="124" data-dl-original="true" data-dl-translated="true"> <span class="hljs-keyword" data-dl-uid="125" data-dl-original="true" data-dl-translated="true">cp</span> <span class="hljs-number" data-dl-uid="126" data-dl-original="true" data-dl-translated="true">144</span></span><span class="line" data-dl-uid="127" data-dl-original="true" data-dl-translated="true"> <span class="hljs-keyword" data-dl-uid="128" data-dl-original="true" data-dl-translated="true">jp</span> <span class="hljs-variable" data-dl-uid="129" data-dl-original="true" data-dl-translated="true">c</span><span class="hljs-punctuation" data-dl-uid="130" data-dl-original="true" data-dl-translated="true">,</span>WaitVBlank</span><span class="line" data-dl-uid="131" data-dl-original="true" data-dl-translated="true">
</span><span class="line" data-dl-uid="132" data-dl-original="true" data-dl-translated="true"> <span class="hljs-comment" data-dl-uid="133" data-dl-original="true" data-dl-translated="true">; LCDをOFFに</span></span>する<span class="line" data-dl-uid="134" data-dl-original="true" data-dl-translated="true"> <span class="hljs-keyword" data-dl-uid="135" data-dl-original="true" data-dl-translated="true">ld</span> <span class="hljs-variable" data-dl-uid="136" data-dl-original="true" data-dl-translated="true">a</span><span class="hljs-punctuation" data-dl-uid="137" data-dl-original="true" data-dl-translated="true">,</span> <span class="hljs-number" data-dl-uid="138" data-dl-original="true" data-dl-translated="true">0</span></span><span class="line" data-dl-uid="139" data-dl-original="true" data-dl-translated="true"> <span class="hljs-keyword" data-dl-uid="140" data-dl-original="true" data-dl-translated="true">ld</span> <span class="hljs-punctuation" data-dl-uid="141" data-dl-original="true" data-dl-translated="true">[rLCDC</span><span class="hljs-punctuation" data-dl-uid="142" data-dl-original="true" data-dl-translated="true">]</span><span class="hljs-punctuation" data-dl-uid="143" data-dl-original="true" data-dl-translated="true">,</span> <span class="hljs-variable" data-dl-uid="144" data-dl-original="true" data-dl-translated="true">a</span></span></code></pre>
<p data-dl-uid="145" data-dl-original="true" data-dl-translated="true">次の数行は「VBlank」まで待ちますが、これは安全に画面を消せる唯一のタイミングです（間違ったタイミングでこれを行うと本物のゲームボーイにダメージを与える可能性があるので、ここは非常に重要です）。 VBlankとは何か、それについてはチュートリアルの後半で詳しく説明します。</p>
<p data-dl-uid="146" data-dl-original="true" data-dl-translated="true">画面を消灯することは重要です。画面をつけたまま新しいタイルをロードするのは厄介なので、その方法は第3回で触れます。</p>
<p>Speaking of tiles, we’re going to load some into VRAM next, using the following code:</p>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="language-rgbasm linenos start=20 hljs" style="counter-reset: lineno 19;"><span class="line">    <span class="hljs-comment">; Copy the tile data</span>
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-variable">de</span><span class="hljs-punctuation">,</span> Tiles
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-variable">hl</span><span class="hljs-punctuation">,</span> <span class="hljs-number">$9000</span>
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-variable">bc</span><span class="hljs-punctuation">,</span> TilesEnd <span class="hljs-operator">-</span> Tiles
</span><span class="line"><span class="hljs-symbol">CopyTiles</span><span class="hljs-punctuation">:</span>
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-variable">a</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">[</span><span class="hljs-variable">de</span><span class="hljs-punctuation">]</span>
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-punctuation">[</span><span class="hljs-variable">hli</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-variable">a</span>
</span><span class="line">    <span class="hljs-keyword">inc</span> <span class="hljs-variable">de</span>
</span><span class="line">    <span class="hljs-keyword">dec</span> <span class="hljs-variable">bc</span>
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-variable">a</span><span class="hljs-punctuation">,</span> <span class="hljs-variable">b</span>
</span><span class="line">    <span class="hljs-keyword">or</span> <span class="hljs-variable">a</span><span class="hljs-punctuation">,</span> <span class="hljs-variable">c</span>
</span><span class="line">    <span class="hljs-keyword">jp</span> <span class="hljs-variable">nz</span><span class="hljs-punctuation">,</span> CopyTiles
</span></code></pre>
<p>This loop might be <a href="https://eldred.fr/gb-asm-tutorial/part1/jumps.html#conditional-jumps">reminiscent of part Ⅰ</a>.
It copies starting at <code class="hljs">Tiles</code> to <code class="hljs">$9000</code> onwards, which is the part of VRAM where our <a href="https://eldred.fr/gb-asm-tutorial/part1/tiles.html">tiles</a> are going to be stored.
Recall that <code class="hljs">$9000</code> is where the data of background tile $00 lies, and the data of subsequent tiles follows right after.
To get the number of bytes to copy, we will do just like in Part Ⅰ: using another label at the end, called <code class="hljs">TilesEnd</code>, the difference between it (= the address after the last byte of tile data) and <code class="hljs">Tiles</code> (= the address of the first byte) will be exactly that length.</p>
<p>That said, we haven’t written <code class="hljs">Tiles</code> nor any of the related data yet.
We’ll get to that later!</p>
<p>Almost done now—next, write another loop, this time for copying <a href="https://eldred.fr/gb-asm-tutorial/part1/tilemap.html">the tilemap</a>.</p>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="language-rgbasm linenos start=33 hljs" style="counter-reset: lineno 32;"><span class="line">    <span class="hljs-comment">; Copy the tilemap</span>
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-variable">de</span><span class="hljs-punctuation">,</span> Tilemap
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-variable">hl</span><span class="hljs-punctuation">,</span> <span class="hljs-number">$9800</span>
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-variable">bc</span><span class="hljs-punctuation">,</span> TilemapEnd <span class="hljs-operator">-</span> Tilemap
</span><span class="line"><span class="hljs-symbol">CopyTilemap</span><span class="hljs-punctuation">:</span>
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-variable">a</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">[</span><span class="hljs-variable">de</span><span class="hljs-punctuation">]</span>
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-punctuation">[</span><span class="hljs-variable">hli</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-variable">a</span>
</span><span class="line">    <span class="hljs-keyword">inc</span> <span class="hljs-variable">de</span>
</span><span class="line">    <span class="hljs-keyword">dec</span> <span class="hljs-variable">bc</span>
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-variable">a</span><span class="hljs-punctuation">,</span> <span class="hljs-variable">b</span>
</span><span class="line">    <span class="hljs-keyword">or</span> <span class="hljs-variable">a</span><span class="hljs-punctuation">,</span> <span class="hljs-variable">c</span>
</span><span class="line">    <span class="hljs-keyword">jp</span> <span class="hljs-variable">nz</span><span class="hljs-punctuation">,</span> CopyTilemap
</span></code></pre>
<p>Note that while this loop’s body is exactly the same as <code class="hljs">CopyTiles</code>’s, the 3 values loaded into <code class="hljs">de</code>, <code class="hljs">hl</code>, and <code class="hljs">bc</code> are different.
These determine the source, destination, and size of the copy, respectively.</p>
<div class="box tip">
<p class="box-title">“<a href="https://en.wikipedia.org/wiki/Don&#39;t_Repeat_Yourself" target="_blank"><abbr title="Don&#39;t Repeat Yourself">DRY</abbr></a>”</p><p>If you think that this is super redundant, you are not wrong, and we will see later how to write actual, reusable <em>functions</em>.
But there is more to them than meets the eye, so we will start tackling them much later.</p>
</div>
<p>Finally, let’s turn the screen back on, and set a <a href="https://eldred.fr/gb-asm-tutorial/part1/palettes.html">background palette</a>.
Rather than writing the non-descript number <code class="hljs">%10000001</code> (or $81 or 129, to taste), we make use of two constants graciously provided by <code class="hljs">hardware.inc</code>: <code class="hljs">LCDCF_ON</code> and <code class="hljs">LCDCF_BGON</code>.
When written to <a href="https://gbdev.io/pandocs/LCDC" target="_blank"><code class="hljs">rLCDC</code></a>, the former causes the PPU and screen to turn back on, and the latter enables the background to be drawn.
(There are other elements that could be drawn, but we are not enabling them yet.)
Combining these constants must be done using <code class="hljs">|</code>, the <em>binary “or”</em> operator; we’ll see why later.</p>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="language-rgbasm linenos start=46 hljs" style="counter-reset: lineno 45;"><span class="line">    <span class="hljs-comment">; Turn the LCD on</span>
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-variable">a</span><span class="hljs-punctuation">,</span> LCDCF_ON <span class="hljs-operator">|</span> LCDCF_BGON
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-punctuation">[</span>rLCDC<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-variable">a</span>
</span><span class="line">
</span><span class="line">    <span class="hljs-comment">; During the first (blank) frame, initialize display registers</span>
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-variable">a</span><span class="hljs-punctuation">,</span> <span class="hljs-number">%11100100</span>
</span><span class="line">    <span class="hljs-keyword">ld</span> <span class="hljs-punctuation">[</span>rBGP<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-variable">a</span>
</span><span class="line">
</span><span class="line"><span class="hljs-symbol">Done</span><span class="hljs-punctuation">:</span>
</span><span class="line">    <span class="hljs-keyword">jp</span> Done
</span></code></pre>
<p>There’s one last thing we need before we can build the ROM, and that’s the graphics.
We will draw the following screen:</p>
<p><img src="./started_files/tilemap.png" alt="Layout of unbricked"></p>
<p>In <code class="hljs">hello-world.asm</code>, tile data had been written out by hand in hexadecimal; this was to let you see how the sausage is made at the lowest level, but <em>boy</em> is it impractical to write!
This time, we will employ a more friendly way, which will let us write each row of pixels more easily.
For each row of pixels, instead of writing <a href="https://eldred.fr/gb-asm-tutorial/part1/tiles.html#encoding">the bitplanes</a> directly, we will use a backtick (<code class="hljs">`</code>) followed by 8 characters.
Each character defines a single pixel, intuitively from left to right; it must be one of 0, 1, 2, and 3, representing the corresponding color index in <a href="https://eldred.fr/gb-asm-tutorial/part1/palettes.html">the palette</a>.</p>
<div class="box tip">
<p>If the character selection isn’t to your liking, you can use <a href="https://rgbds.gbdev.io/docs/v0.5.2/rgbasm.1#g" target="_blank">RGBASM’s <code class="hljs">-g</code> option</a> or <a href="https://rgbds.gbdev.io/docs/v0.5.2/rgbasm.5/#Changing_options_while_assembling" target="_blank"><code class="hljs">OPT g</code></a> to pick others.
For example, <code class="hljs">rgbasm -g '.xXO' (...)</code> or <code class="hljs">OPT g.xXO</code> would swap the four characters to <code class="hljs">.</code>, <code class="hljs">x</code>, <code class="hljs">X</code>, and <code class="hljs">O</code> respectively.</p>
</div>
<p>For example:</p>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="language-rgbasm hljs">    <span class="hljs-keyword">dw</span> <span class="hljs-number">`01230123</span> <span class="hljs-comment">; This is equivalent to `db $55,$33`</span>
</code></pre>
<p>You may have noticed that we are using <code class="hljs">dw</code> instead of <code class="hljs">db</code>; the difference between these two will be explained later.
We already have tiles made for this project, so you can copy <a href="https://github.com/ISSOtm/gb-asm-tutorial/raw/master/unbricked/getting-started/tileset.asm" target="_blank">this premade file</a>, and paste it at the end of your code.</p>
<p>Then copy the tilemap from <a href="https://github.com/ISSOtm/gb-asm-tutorial/raw/master/unbricked/getting-started/tilemap.asm" target="_blank">this file</a>, and paste it after the <code class="hljs">TilesEnd</code> label.</p>
<p>You can build the ROM now, by running the following commands in your terminal:</p>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="hljs"><span class="console-line hljs-meta"></span><span class="language-bash">rgbasm -L -o main.o main.asm</span>
<span class="console-line hljs-meta"></span><span class="language-bash">rgblink -o unbricked.gb main.o</span>
<span class="console-line hljs-meta"></span><span class="language-bash">rgbfix -v -p 0xFF unbricked.gb</span>
</code></pre>
<p>If you run this in your emulator, you should see the following:</p>
<p><img src="./started_files/screenshot.png" alt="Screenshot of our game"></p>
<p>That white square seems to be missing!
You may have noticed this comment earlier, somewhere in the tile data:</p>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="language-rgbasm linenos start=135 hljs" style="counter-reset: lineno 134;"><span class="line">    <span class="hljs-keyword">dw</span> <span class="hljs-number">`22322232</span>
</span><span class="line">    <span class="hljs-keyword">dw</span> <span class="hljs-number">`23232323</span>
</span><span class="line">    <span class="hljs-keyword">dw</span> <span class="hljs-number">`33333333</span>
</span><span class="line">    <span class="hljs-comment">; Paste your logo here:</span>
</span><span class="line">
</span><span class="line"><span class="hljs-symbol">TilesEnd</span><span class="hljs-punctuation">:</span>
</span></code></pre>
<p>The logo tiles were left intentionally blank so that you can choose your own.
You can use one of the following pre-made logos, or try coming up with your own!</p>
<ul>
<li>
<p><strong>RGBDS Logo</strong></p>
<p><img src="./started_files/rgbds.png" alt="The RGBDS Logo"></p>
<p><a href="https://github.com/ISSOtm/gb-asm-tutorial/raw/master/unbricked/getting-started/rgbds.asm" target="_blank">Source</a></p>
</li>
<li>
<p><strong>Duck</strong></p>
<p><img src="./started_files/duck.png" alt="A pixel-art duck"></p>
<p><a href="https://github.com/ISSOtm/gb-asm-tutorial/raw/master/unbricked/getting-started/duck.asm" target="_blank">Source</a></p>
</li>
<li>
<p><strong>Tail</strong></p>
<p><img src="./started_files/tail.png" alt="A silhouette of a tail"></p>
<p><a href="https://github.com/ISSOtm/gb-asm-tutorial/raw/master/unbricked/getting-started/tail.asm" target="_blank">Source</a></p>
</li>
</ul>
<p>Add your chosen logo’s data (click one of the “Source” links above) after the comment, build the game again, and you should see your logo of choice in the bottom-right!</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="https://eldred.fr/gb-asm-tutorial/part1/wrapup.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="https://eldred.fr/gb-asm-tutorial/part2/objects.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="https://eldred.fr/gb-asm-tutorial/part1/wrapup.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="https://eldred.fr/gb-asm-tutorial/part2/objects.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="./started_files/elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="./started_files/mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="./started_files/searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="./started_files/clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="./started_files/highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="./started_files/book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="./started_files/linenos.js"></script>


    

<img id="sddsExtensionInfoImg" style="display: none; position: absolute; top: 0px; left: 0px; width: 32px; height: 32px; z-index: 2147483647;"><img id="sddsExtensionArrowImg" style="display: none; position: absolute; top: 0px; left: 0px; width: 32px; height: 32px; z-index: 2147483647;"></body></html>