<!DOCTYPE html>
<!-- saved from url=(0053)https://eldred.fr/gb-asm-tutorial/part1/assembly.html -->
<html lang="en" class="js sidebar-visible light"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!-- Book generated using mdBook -->
        
        <title>Assembly basics - GB ASM Tutorial</title>


        <!-- Custom HTML head -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site:id" content="@issotm">
        <meta property="og:title" content="Assembly basics - GB ASM Tutorial">
        <meta property="og:image" content="https://eldred.fr/gb-asm-tutorial/assets/banner/1200x628.png">
        <meta property="og:site_name" content="GB ASM Tutorial">

        
        <meta name="description" content="A complete guide to programming Game Boy games in assembly.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="rgba(0, 0, 0, 0)">

        <link rel="icon" href="https://eldred.fr/gb-asm-tutorial/favicon.svg">
        <link rel="shortcut icon" href="https://eldred.fr/gb-asm-tutorial/favicon.png">
        <link rel="stylesheet" href="./asm_files/variables.css">
        <link rel="stylesheet" href="./asm_files/general.css">
        <link rel="stylesheet" href="./asm_files/chrome.css">
        <link rel="stylesheet" href="./asm_files/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="./asm_files/font-awesome.css">
        <link rel="stylesheet" href="./asm_files/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="./asm_files/highlight.css">
        <link rel="stylesheet" href="./asm_files/tomorrow-night.css" disabled="">
        <link rel="stylesheet" href="./asm_files/ayu-highlight.css" disabled="">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./asm_files/custom.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents" aria-hidden="false">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="https://eldred.fr/gb-asm-tutorial/index.html" tabindex="0" data-dl-uid="0" data-dl-original="true" data-dl-translated="true">ホーム</a></li><li class="chapter-item affix "><a href="https://eldred.fr/gb-asm-tutorial/roadmap.html" tabindex="0" data-dl-uid="1" data-dl-original="true" data-dl-translated="true">ロードマップ</a></li><li class="chapter-item affix "><a href="https://eldred.fr/gb-asm-tutorial/help-feedback.html" tabindex="0" data-dl-uid="2" data-dl-original="true" data-dl-translated="true">ヘルプとフィードバック</a></li><li class="chapter-item affix "></li><li class="part-title" data-dl-uid="3" data-dl-original="true" data-dl-translated="true">Part.I - Hello World!</li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/setup.html" tabindex="0" data-dl-uid="4" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="5" data-dl-original="true" data-dl-translated="true">1.</strong>セットアップ</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/hello_world.html" tabindex="0" data-dl-uid="6" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="7" data-dl-original="true" data-dl-translated="true">2.</strong>Hello World!</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/toolchain.html" tabindex="0" data-dl-uid="8" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="9" data-dl-original="true" data-dl-translated="true">3.</strong>ツールチェイン</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/bin_and_hex.html" tabindex="0" data-dl-uid="10" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="11" data-dl-original="true" data-dl-translated="true">4.</strong>2進数、16進数</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/registers.html" tabindex="0" data-dl-uid="12" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="13" data-dl-original="true" data-dl-translated="true">5.</strong>レジスター</a></li><li class="chapter-item expanded "><a href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html" class="active" tabindex="0" data-dl-uid="14" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="15" data-dl-original="true" data-dl-translated="true">6.</strong>組立の基本</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/memory.html" tabindex="0" data-dl-uid="16" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="17" data-dl-original="true" data-dl-translated="true">7.</strong>メモリ</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/header.html" tabindex="0" data-dl-uid="18" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="19" data-dl-original="true" data-dl-translated="true">8.</strong>ヘッダー</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/operations.html" tabindex="0" data-dl-uid="20" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="21" data-dl-original="true" data-dl-translated="true">9.</strong>オペレーション＆フラッグ</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/jumps.html" tabindex="0" data-dl-uid="22" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="23" data-dl-original="true" data-dl-translated="true">10.</strong>ジャンプ</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/tracing.html" tabindex="0" data-dl-uid="24" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="25" data-dl-original="true" data-dl-translated="true">11.</strong>トレース</a></li><li class="chapter-item "><div data-dl-uid="26" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="27" data-dl-original="true" data-dl-translated="true">12.</strong>グラフィックス</div><a class="toggle" tabindex="0"><div data-dl-uid="28" data-dl-original="true" data-dl-translated="true">❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/tiles.html" tabindex="0"><strong aria-hidden="true">12.1.</strong> Tiles</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/palettes.html" tabindex="0"><strong aria-hidden="true">12.2.</strong> Palettes</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/tilemap.html" tabindex="0"><strong aria-hidden="true">12.3.</strong> Tilemap</a></li></ol></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part1/wrapup.html" tabindex="0" data-dl-uid="29" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="30" data-dl-original="true" data-dl-translated="true">13.</strong>まとめ</a></li><li class="chapter-item affix "></li><li class="part-title" data-dl-uid="31" data-dl-original="true" data-dl-translated="true">Part II - 初めてのゲーム</li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part2/getting-started.html" tabindex="0" data-dl-uid="32" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="33" data-dl-original="true" data-dl-translated="true">14.</strong>はじめに</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part2/objects.html" tabindex="0" data-dl-uid="34" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="35" data-dl-original="true" data-dl-translated="true">15.</strong>対象物</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part2/functions.html" tabindex="0" data-dl-uid="36" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="37" data-dl-original="true" data-dl-translated="true">16.</strong>機能一覧</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part2/input.html" tabindex="0" data-dl-uid="38" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="39" data-dl-original="true" data-dl-translated="true">17.</strong>入力</a></li><li class="chapter-item "><a href="https://eldred.fr/gb-asm-tutorial/part2/wip.html" tabindex="0" data-dl-uid="40" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="41" data-dl-original="true" data-dl-translated="true">18.</strong>進行中の仕事</a></li><li class="chapter-item affix "></li><li class="part-title" data-dl-uid="42" data-dl-original="true" data-dl-translated="true">第Ⅲ部 第2試合</li><li class="chapter-item "><div data-dl-uid="43" data-dl-original="true" data-dl-translated="true"><strong aria-hidden="true" data-dl-uid="44" data-dl-original="true" data-dl-translated="true">19.</strong>To be written...</div></li><li class="spacer"></li><li class="chapter-item affix "><a href="https://eldred.fr/gb-asm-tutorial/next.html" tabindex="0" data-dl-uid="45" data-dl-original="true" data-dl-translated="true">次に進むべき道</a></li><li class="chapter-item affix "><a href="https://eldred.fr/gb-asm-tutorial/resources.html" tabindex="0" data-dl-uid="46" data-dl-original="true" data-dl-translated="true">リソース</a></li><li class="chapter-item affix "><a href="https://eldred.fr/gb-asm-tutorial/thanks.html" tabindex="0" data-dl-uid="47" data-dl-original="true" data-dl-translated="true">感謝</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar" style="top: 0px;">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar" aria-expanded="true">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title" data-dl-uid="48" data-dl-original="true" data-dl-translated="true">GB ASMチュートリアル</h1>

                    <div class="right-buttons">
                        <a href="https://eldred.fr/gb-asm-tutorial/print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ISSOtm/gb-asm-tutorial" title="Git repository" aria-label="Git repository" target="_blank">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/ISSOtm/gb-asm-tutorial/edit/master/src/part1/assembly.md" title="Suggest an edit" aria-label="Suggest an edit" target="_blank">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="assembly-basics" data-dl-uid="49" data-dl-original="true" data-dl-translated="true"><a class="header" href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html#assembly-basics" data-dl-uid="50" data-dl-original="true" data-dl-translated="true">アセンブリの基本</a></h1>
<p data-dl-uid="51" data-dl-original="true" data-dl-translated="true">さて、ツールが何を<em data-dl-uid="52" data-dl-original="true" data-dl-translated="true">するか</em>わかったところで、RGBASMがどんな言語を話すか見てみましょう。 行番号がわかるように、そしてエディタがサポートしていなくてもシンタックスハイライトができるように、<code class="hljs" data-dl-uid="53" data-dl-original="true" data-dl-translated="true">hello-world.asmの</code>最初の部分を短く切り取ります。</p>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="language-rgbasm linenos start=1 hljs" style="counter-reset: lineno 0;" data-dl-uid="54" data-dl-original="true" data-dl-translated="true"><span class="line" data-dl-uid="55" data-dl-original="true" data-dl-translated="true"><span class="hljs-keyword" data-dl-uid="56" data-dl-original="true" data-dl-translated="true">INCLUDE</span> <span class="hljs-string" data-dl-uid="57" data-dl-original="true" data-dl-translated="true">"hardware.inc"</span></span><span class="line" data-dl-uid="58" data-dl-original="true" data-dl-translated="true">
</span><span class="line" data-dl-uid="59" data-dl-original="true" data-dl-translated="true"><span class="hljs-keyword" data-dl-uid="60" data-dl-original="true" data-dl-translated="true">SECTION</span> <span class="hljs-string" data-dl-uid="61" data-dl-original="true" data-dl-translated="true">"Header"</span><span class="hljs-punctuation" data-dl-uid="62" data-dl-original="true" data-dl-translated="true">,</span> <span class="hljs-type" data-dl-uid="63" data-dl-original="true" data-dl-translated="true">ROM0</span><span class="hljs-punctuation" data-dl-uid="64" data-dl-original="true" data-dl-translated="true">[</span><span class="hljs-number" data-dl-uid="65" data-dl-original="true" data-dl-translated="true">$100</span><span class="hljs-punctuation" data-dl-uid="66" data-dl-original="true" data-dl-translated="true">]</span></span><span class="line" data-dl-uid="67" data-dl-original="true" data-dl-translated="true">
</span><span class="line" data-dl-uid="68" data-dl-original="true" data-dl-translated="true"> <span class="hljs-keyword" data-dl-uid="69" data-dl-original="true" data-dl-translated="true">jp</span>EntryPoint</span><span class="line" data-dl-uid="70" data-dl-original="true" data-dl-translated="true">
</span><span class="line" data-dl-uid="71" data-dl-original="true" data-dl-translated="true"> <span class="hljs-keyword" data-dl-uid="72" data-dl-original="true" data-dl-translated="true">ds</span> <span class="hljs-number" data-dl-uid="73" data-dl-original="true" data-dl-translated="true">$150</span> <span class="hljs-operator" data-dl-uid="74" data-dl-original="true" data-dl-translated="true">-</span>@<span class="hljs-punctuation" data-dl-uid="75" data-dl-original="true" data-dl-translated="true">,</span> <span class="hljs-number" data-dl-uid="76" data-dl-original="true" data-dl-translated="true">0</span> <span class="hljs-comment" data-dl-uid="77" data-dl-original="true" data-dl-translated="true">; ヘッダのためのスペースを確保</span></span><span class="line" data-dl-uid="78" data-dl-original="true" data-dl-translated="true">
</span><span class="line" data-dl-uid="79" data-dl-original="true" data-dl-translated="true"><span class="hljs-symbol" data-dl-uid="80" data-dl-original="true" data-dl-translated="true">EntryPoint</span><span class="hljs-punctuation" data-dl-uid="81" data-dl-original="true" data-dl-translated="true">:</span></span><span class="line" data-dl-uid="82" data-dl-original="true" data-dl-translated="true"> <span class="hljs-comment" data-dl-uid="83" data-dl-original="true" data-dl-translated="true">; オーディオ回路をシャットダウン</span></span><span class="line" data-dl-uid="84" data-dl-original="true" data-dl-translated="true"> <span class="hljs-keyword" data-dl-uid="85" data-dl-original="true" data-dl-translated="true">ld</span> <span class="hljs-variable" data-dl-uid="86" data-dl-original="true" data-dl-translated="true">a</span><span class="hljs-punctuation" data-dl-uid="87" data-dl-original="true" data-dl-translated="true">,</span> <span class="hljs-number" data-dl-uid="88" data-dl-original="true" data-dl-translated="true">0</span></span><span class="line" data-dl-uid="89" data-dl-original="true" data-dl-translated="true"> <span class="hljs-keyword" data-dl-uid="90" data-dl-original="true" data-dl-translated="true">ld</span> <span class="hljs-punctuation" data-dl-uid="91" data-dl-original="true" data-dl-translated="true">[rNR52</span><span class="hljs-punctuation" data-dl-uid="92" data-dl-original="true" data-dl-translated="true">]</span><span class="hljs-punctuation" data-dl-uid="93" data-dl-original="true" data-dl-translated="true">,</span> <span class="hljs-variable" data-dl-uid="94" data-dl-original="true" data-dl-translated="true">a</span></span></code></pre>
<p data-dl-uid="95" data-dl-original="true" data-dl-translated="true">RGBASMの<em data-dl-uid="96" data-dl-original="true" data-dl-translated="true">多くの</em>機能を無視することになるので、もっと知りたい人はパートIIとIIIまで待つか、<a href="https://rgbds.gbdev.io/docs" target="_blank" data-dl-uid="97" data-dl-original="true" data-dl-translated="true">ドキュメントを</a>読んでください。</p>
<h2 id="comments" data-dl-uid="98" data-dl-original="true" data-dl-translated="true"><a class="header" href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html#comments" data-dl-uid="99" data-dl-original="true" data-dl-translated="true">コメント</a></h2>
<p data-dl-uid="100" data-dl-original="true" data-dl-translated="true">まず10行目から始めますが、上では灰色に表示されているはずです。 セミコロン<code class="hljs" data-dl-uid="101" data-dl-original="true" data-dl-translated="true">;</code>は<em data-dl-uid="102" data-dl-original="true" data-dl-translated="true">コメントを</em>表します。 セミコロンから行末まではRGBASMでは<em data-dl-uid="103" data-dl-original="true" data-dl-translated="true">無視</em>されます。 7行目でわかるように、コメントは他の空の行にある必要はありません。</p>
<p data-dl-uid="104" data-dl-original="true" data-dl-translated="true">コメントは、優れたプログラミング言語の定番です。 コードが何をしているのか、文脈を示すのに便利です。基本的には、「オーブンを180℃で予熱してください」と「オーブンを180℃で予熱してください、それ以上だとケーキが焦げてしまいます」の違いです。 どんな言語でも、優れたコメントは非常に便利です。アセンブリでは、多くの一般的な意味論が使えないため、コメントはより重要な役割を担います。</p>
<h2 id="instructions" data-dl-uid="105" data-dl-original="true" data-dl-translated="true"><a class="header" href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html#instructions" data-dl-uid="106" data-dl-original="true" data-dl-translated="true">取扱説明書</a></h2>
<p data-dl-uid="107" data-dl-original="true" data-dl-translated="true">アセンブリは非常に行数の多い言語です。 各行には2つのうちの1つが含まれます。</p>
<ul>
<li data-dl-uid="108" data-dl-original="true" data-dl-translated="true">RGBASMに何かを指示する<em data-dl-uid="109" data-dl-original="true" data-dl-translated="true">ディレクティブ</em>、または</li>
<li data-dl-uid="110" data-dl-original="true" data-dl-translated="true">という<em data-dl-uid="111" data-dl-original="true" data-dl-translated="true">命令</em><sup class="footnote-reference" data-dl-uid="112" data-dl-original="true" data-dl-translated="true"><a href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html#instr_directive" data-dl-uid="113" data-dl-original="true" data-dl-translated="true">1が</a></sup>あり、これが直接ROMに書き込まれます。</li>
</ul>
<p data-dl-uid="114" data-dl-original="true" data-dl-translated="true">ディレクティブについては後で説明しますが、今は命令に注目しましょう。例えば、上のスニペットでは、1行目<code class="hljs" data-dl-uid="115" data-dl-original="true" data-dl-translated="true">（INCLUDE</code>）、7行目<code class="hljs" data-dl-uid="116" data-dl-original="true" data-dl-translated="true">（ds</code>）、3行目<code class="hljs" data-dl-uid="117" data-dl-original="true" data-dl-translated="true">（SECTION</code>）は無視することにしましょう。</p>
<p data-dl-uid="118" data-dl-original="true" data-dl-translated="true">ケーキ作りの例えをさらに続けると、命令はレシピの手順のようなものです。 ゲーム機のプロセッサ<abbr title="Central Processing Unit" data-dl-uid="119" data-dl-original="true" data-dl-translated="true">（CPU</abbr>）は命令を一つずつ実行し、それが...最終的に何かをします！例えばケーキを焼いたり、「Hello World」画像を描いたり、ゲームボーイのプログラミングチュートリアルを表示したり！ *wink* *wink*.</p>
<p data-dl-uid="120" data-dl-original="true" data-dl-translated="true">例えば、「チョコレートとバターを鍋で溶かす」という命令では、<em data-dl-uid="123" data-dl-original="true" data-dl-translated="true">文全体が</em>命令、<em data-dl-uid="124" data-dl-original="true" data-dl-translated="true">動詞の</em>「溶かす」が<em data-dl-uid="121" data-dl-original="true" data-dl-translated="true">ニモニック</em>、「チョコレート」「バター」「鍋」が<em data-dl-uid="122" data-dl-original="true" data-dl-translated="true">オペランド</em>、つまり操作のパラメータのようなものになります。</p>
<p>Let’s discuss the most fundamental instruction, <strong><code class="hljs">ld</code></strong>.
<code class="hljs">ld</code> stands for “LoaD”, and its purpose is simply to copy data from its right operand (<a href="https://en.wikipedia.org/wiki/Sides_of_an_equation" target="_blank">“<abbr title="Right-Hand Side">RHS</abbr>”</a>) into its left operand (<a href="https://en.wikipedia.org/wiki/Sides_of_an_equation" target="_blank">“<abbr title="Left-Hand Side">LHS</abbr>”</a>).
For example, take line 11’s <code class="hljs">ld a, 0</code>: it copies (“loads”) the value 0 into the 8-bit register <code class="hljs">a</code><sup class="footnote-reference"><a href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html#ld_imm_from">2</a></sup>.
If you look further in the file, line 33 has <code class="hljs">ld a, b</code>, which causes the value in register <code class="hljs">b</code> to be copied into register <code class="hljs">a</code>.</p>
<div class="table-wrapper"><table><thead><tr><th>Instruction</th><th>Mnemonic</th><th>Effect</th></tr></thead><tbody>
<tr><td>Load</td><td><code class="hljs">ld</code></td><td>Copies values around</td></tr>
</tbody></table>
</div>
<div class="box tip decorated">
<div><p>ℹ️</p></div>
<div>
<p>Due to CPU limitations, not all operand combinations are valid for <code class="hljs">ld</code> and many other instructions; we will talk about this when writing our own code later.</p>
</div>
</div>
<div class="box tip decorated">
<div><p>🤔</p></div>
<div>
<p>RGBDS has an <a href="https://rgbds.gbdev.io/docs/gbz80.7" target="_blank">instruction reference</a> worth bookmarking, and you can also consult it locally with <code class="hljs">man 7 gbz80</code> if RGBDS is installed on your machine (except Windows…).
The descriptions there are more succinct, since they’re intended as reminders, not as tutorials.</p>
</div>
</div>
<h2 id="directives"><a class="header" href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html#directives">Directives</a></h2>
<p>In a way, instructions are destined to the console’s CPU, and comments are destined to the programmer.
But some lines are neither, and are instead sort of metadata destined to RGBDS itself.
Those are called <em>directives</em>, and our Hello World actually contains three of those.</p>
<h3 id="including-other-files"><a class="header" href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html#including-other-files">Including other files</a></h3>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="language-rgbasm linenos hljs"><span class="line"><span class="hljs-keyword">INCLUDE</span> <span class="hljs-string">"hardware.inc"</span>
</span></code></pre>
<p>Line 1 <em>includes</em> <code class="hljs">hardware.inc</code><sup class="footnote-reference"><a href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html#hw_inc_directives">3</a></sup>.
Including a file has the same effect as if you copy-pasted it, but without having to actually do that.</p>
<p>It allows sharing code across files easily: for example, if two files <code class="hljs">a.asm</code> and <code class="hljs">b.asm</code> were to include <code class="hljs">hardware.inc</code>, you would only need to modify <code class="hljs">hardware.inc</code> once for the modifications to apply to both <code class="hljs">a.asm</code> and <code class="hljs">b.asm</code>.
If you instead copy-pasted the contents manually, you would have to edit both copies in <code class="hljs">a.asm</code> and <code class="hljs">b.asm</code> to apply the changes, which is more tedious and error-prone.</p>
<p><code class="hljs">hardware.inc</code> defines a bunch of constants related to interfacing with the hardware.
Constants are basically names with a value attached, so when you write out their name, they are replaced with their value.
This is useful because, for example, it is easier to remember the address of the <strong>LCD</strong> <strong>C</strong>ontrol register as <code class="hljs">rLCDC</code> than <code class="hljs">$FF40</code>.</p>
<p>We will discuss constants in more detail in Part Ⅱ.</p>
<h3 id="sections"><a class="header" href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html#sections">Sections</a></h3>
<p>Let’s first explain what a “section” is, then we will see what line 3 does.</p>
<p>A section represents a contiguous range of memory, and by default, ends up <em>somewhere</em> not known in advance.
If you want to see where all the sections end up, you can ask RGBLINK to generate a “map file” with the <code class="hljs">-m</code> flag:</p>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="hljs"><span class="console-line hljs-meta"></span><span class="language-bash">rgblink hello-world.o -m hello-world.map</span>
</code></pre>
<p>…and we can see, for example, where the <code class="hljs">"Tilemap"</code> section ended up:</p>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="hljs">  SECTION: $05a6-$07e5 ($0240 bytes) ["Tilemap"]
</code></pre>
<p>Sections cannot be split by RGBDS, which is useful e.g. for code, since the processor executes instructions one right after the other (except jumps, as we will see later).
There is a balance to be struck between too many and not enough sections, but it typically doesn’t matter much until banking is introduced into the picture—and it won’t be until much, much later.</p>
<p>So, for now, let’s just assume that one section should contain things that “go together” topically, and let’s examine one of ours.</p>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="language-rgbasm linenos start=3 hljs" style="counter-reset: lineno 2;"><span class="line"><span class="hljs-keyword">SECTION</span> <span class="hljs-string">"Header"</span><span class="hljs-punctuation">,</span> <span class="hljs-type">ROM0</span><span class="hljs-punctuation">[</span><span class="hljs-number">$100</span><span class="hljs-punctuation">]</span>
</span></code></pre>
<p>So!
What’s happening here?
Well, we are simply declaring a new section; all instructions and data after this line and until the next <code class="hljs">SECTION</code> one will be placed in this newly-created section.
Before the first <code class="hljs">SECTION</code> directive, there is no “active” section, and thus generating code or data will be met with a <code class="hljs">Cannot output data outside of a SECTION</code> error.</p>
<p>The new section’s name is “<code class="hljs">Header</code>”.
Section names can contain any characters (and even be empty, if you want), and must be unique<sup class="footnote-reference"><a href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html#sect_name">4</a></sup>.
The <code class="hljs">ROM0</code> keyword indicates which “memory type” the section belongs to (<a href="https://rgbds.gbdev.io/docs/v0.5.2/rgbasm.5#SECTIONS" target="_blank">here is a list</a>).
We will discuss them in Part Ⅱ.</p>
<p>The <code class="hljs">[$100]</code> part is more interesting, in that it is unique to this section.
See, I said above that:</p>
<blockquote>
<p>a section […] by default, ends up <em>somewhere</em> not known in advance.</p>
</blockquote>
<p>However, some memory locations are special, and so sometimes we need a specific section to span a specific range of memory.
To enable this, RGBASM provides the <code class="hljs">[addr]</code> syntax, which <em>forces</em> the section’s starting address to be <code class="hljs">addr</code>.</p>
<p>In this case, the memory range $100–$14F is special, as it is the <em>ROM’s header</em>.
We will discuss the header in a couple lessons, but for now, just know that we need not to put any of our code or data in that space.
How do we do that?
Well, first, we begin a section at address $100, and then we need to reserve some space.</p>
<h3 id="reserving-space"><a class="header" href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html#reserving-space">Reserving space</a></h3>
<pre><div class="buttons"><button class="fa fa-copy clip-button" title="Copy to clipboard" aria-label="Copy to clipboard"><i class="tooltiptext"></i></button></div><code class="language-rgbasm linenos start=5 hljs" style="counter-reset: lineno 4;"><span class="line">    <span class="hljs-keyword">jp</span> EntryPoint
</span><span class="line">
</span><span class="line">    <span class="hljs-keyword">ds</span> <span class="hljs-number">$150</span> <span class="hljs-operator">-</span> @<span class="hljs-punctuation">,</span> <span class="hljs-number">0</span> <span class="hljs-comment">; Make room for the header</span>
</span></code></pre>
<p>Line 7 claims to “Make room for the header”, which I briefly mentioned just above.
For now, let’s focus on what <code class="hljs">ds</code> actually does.</p>
<p><code class="hljs">ds</code> is used for <em>statically</em> allocating memory.
It simply reserves some amount of bytes, which are set to a given value.
The first argument to <code class="hljs">ds</code>, here <code class="hljs">$150 - @</code>, is <em>how many bytes to reserve</em>.
The second (optional) argument, here <code class="hljs">0</code>, is <em>what value to set each reserved byte to</em><sup class="footnote-reference"><a href="https://eldred.fr/gb-asm-tutorial/part1/assembly.html#ds_pattern">5</a></sup>.</p>
<p>We will see why these bytes must be reserved in a couple of lessons.</p>
<p>It is worth mentioning that this first argument here is an <em>expression</em>.
RGBDS (thankfully!) supports arbitrary expressions essentially anywhere.
This expression is a simple subtraction: $150 minus <code class="hljs">@</code>, which is a special symbol that stands for “the current memory address”.</p>
<div class="box tip">
<p>A symbol is essentially “a name attached to a value”, usually a number.
We will explore the different types of symbols throughout the tutorial, starting with labels in the next section.</p>
<p>A numerical symbol used in an expression evaluates to its value, which must be known when compiling the ROM—in particular, it can’t depend on any register’s contents.</p>
</div>
<p>Oh, but you may be wondering what the “memory addresses” I keep mentioning are.
Let’s see about those!</p>
<hr>
<div class="footnote-definition" id="instr_directive"><sup class="footnote-definition-label">1</sup>
<p>Technically, instructions in RGBASM are implemented as directives, basically writing their encoded form to the ROM; but the distinction between the instructions in the source code and those in the final ROM is not worth bringing up right now.</p>
</div>
<div class="footnote-definition" id="ld_imm_from"><sup class="footnote-definition-label">2</sup>
<p>The curious reader may ask where the value is copied <em>from</em>. The answer is simply that the "immediate" byte ($00 in this example) is stored in ROM just after the instruction’s opcode byte, and it’s what gets copied to <code class="hljs">a</code>.
We will come back to this when we talk about how instructions are encoded later on.</p>
</div>
<div class="footnote-definition" id="hw_inc_directives"><sup class="footnote-definition-label">3</sup>
<p><code class="hljs">hardware.inc</code> itself contains more directives, in particular to define a lot of symbols.
They will be touched upon much later, so we won’t look into <code class="hljs">hardware.inc</code> yet.</p>
</div>
<div class="footnote-definition" id="sect_name"><sup class="footnote-definition-label">4</sup>
<p>Section names actually only need to be unique for “plain” sections, and function differently with “unionized” and “fragment” sections, which we will discuss much later.</p>
</div>
<div class="footnote-definition" id="ds_pattern"><sup class="footnote-definition-label">5</sup>
<p>Actually, since RGBASM 0.5.0, <code class="hljs">ds</code> can accept a <em>list</em> of bytes, and will repeat the pattern for as many bytes as specified.
It just complicates the explanation slightly, so I omitted it for now.
Also, if the argument is omitted, it defaults to what is specified using the <code class="hljs">-p</code> option <strong>to RGBASM</strong>.</p>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="https://eldred.fr/gb-asm-tutorial/part1/registers.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="https://eldred.fr/gb-asm-tutorial/part1/memory.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="https://eldred.fr/gb-asm-tutorial/part1/registers.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="https://eldred.fr/gb-asm-tutorial/part1/memory.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="./asm_files/elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="./asm_files/mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="./asm_files/searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="./asm_files/clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="./asm_files/highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="./asm_files/book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="./asm_files/linenos.js"></script>


    

<img id="sddsExtensionInfoImg" style="display: none; position: absolute; top: 0px; left: 0px; width: 32px; height: 32px; z-index: 2147483647;"><img id="sddsExtensionArrowImg" style="display: none; position: absolute; top: 0px; left: 0px; width: 32px; height: 32px; z-index: 2147483647;"></body></html>